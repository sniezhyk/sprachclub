<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meine Events – Organizer</title>
    <link rel="stylesheet" href="static/my-event.css" />
  </head>
  <body>
    <nav class="navbar">
      <a href="/">Home</a>
      <a href="/event-create.html">Event erstellen</a>
      <div class="spacer"></div>
      <a class="link" href="/account.html">Mein Account</a>
    </nav>

    <main class="page">
      <header class="page-header">
        <h1>Meine Events</h1>
        <div class="tools">
          <input
            id="q"
            type="search"
            placeholder="Suchen: Titel, Ort, Kategorie…"
          />
          <select id="sort">
            <option value="date-asc">Datum ↑</option>
            <option value="date-desc">Datum ↓</option>
            <option value="title-asc">Titel A–Z</option>
            <option value="title-desc">Titel Z–A</option>
          </select>
          <button id="reload" class="btn">Neu laden</button>
        </div>
      </header>

      <div id="msg" class="msg" aria-live="polite"></div>

      <section id="list" class="grid"></section>

      <!-- Drawer / Modal zum Bearbeiten -->
      <dialog id="editDlg">
        <form id="editForm" method="dialog" class="card" autocomplete="off">
          <header class="dlg-header">
            <h2 id="dlgTitle">Event bearbeiten</h2>
            <button
              type="button"
              id="closeDlg"
              class="icon-btn"
              aria-label="Schließen"
            >
              ×
            </button>
          </header>

          <div class="grid form-grid">
            <label
              >Titel
              <input
                type="text"
                id="f_title"
                required
                placeholder="Titel des Events"
              />
            </label>

            <label
              >Datum
              <input type="date" id="f_eventDate" required />
            </label>

            <label
              >Ort
              <input
                type="text"
                id="f_location"
                required
                placeholder="Stadt, Location"
              />
            </label>

            <label
              >Kategorie (optional)
              <input
                type="text"
                id="f_categoryName"
                placeholder="Muss in 'category' existieren"
              />
            </label>

            <label
              >Preis (€)
              <input
                type="number"
                id="f_price"
                required
                min="0"
                step="0.01"
                placeholder="0.00"
              />
            </label>

            <label
              >Kapazität
              <input
                type="number"
                id="f_capacity"
                required
                min="0"
                step="1"
                placeholder="100"
              />
            </label>

            <label class="col-span-2"
              >Beschreibung (optional)
              <textarea
                id="f_description"
                rows="5"
                placeholder="Kurze Beschreibung…"
              ></textarea>
            </label>
          </div>

          <div class="actions">
            <button id="saveBtn" class="btn btn-primary" type="submit">
              Speichern
            </button>
            <button id="delBtn" class="btn btn-danger" type="button">
              Löschen
            </button>
            <button class="btn" type="button" id="cancelBtn">Abbrechen</button>
          </div>

          <div id="dlgMsg" class="msg" aria-live="polite"></div>
        </form>
      </dialog>
        <!-- Dialog: Statistik -->
<dialog id="statsDlg">
  <div class="card stats-card" role="document">
    <header class="dlg-header">
      <h2>Statistik – <span id="s_title">Event</span></h2>
      <button type="button" id="closeStats" class="icon-btn" aria-label="Schließen">×</button>
    </header>

    <div class="stats-grid">
      <section class="kpis">
        <div class="kpi">
          <div class="kpi-label">Buchungen gesamt</div>
          <div class="kpi-value" id="s_total">–</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Restplätze</div>
          <div class="kpi-value" id="s_remaining">–</div>
        </div>
        <div class="kpi">
          <div class="kpi-label">Kapazität</div>
          <div class="kpi-value" id="s_capacity">–</div>
        </div>
      </section>

      <section>
        <h3>Auslastung</h3>
        <div class="progress" title="Auslastung">
          <div id="s_progress" class="progress-bar" style="width:0%"></div>
        </div>
        <p class="muted">
          <span id="s_used">0</span>/<span id="s_cap2">0</span> belegt
          (<span id="s_pct">0</span>%)
        </p>
      </section>

      <section>
        <h3>Buchungen nach Datum</h3>
        <div id="s_byDate" class="list vertical"></div>
      </section>

      <section>
        <h3>Buchungen nach Status</h3>
        <div id="s_byStatus" class="list vertical"></div>
      </section>

      <section class="col-span-2">
        <h3>Audit (letzte Änderungen)</h3>
        <div id="s_recent" class="table like-table"></div>
      </section>
    </div>

    <div class="actions">
      <button class="btn" id="refreshStats" type="button">Neu laden</button>
      <button class="btn" id="exportStats" type="button">Export JSON</button>
      <button class="btn" id="closeStatsFooter" type="button">Schließen</button>
    </div>

    <div id="statsMsg" class="msg" aria-live="polite"></div>
  </div>
</dialog>

    </main>

    <script src="static/my-event.js" defer></script>
  </body>
</html>
